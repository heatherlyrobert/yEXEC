#!/usr/local/bin/koios
#   koios-polos (north star) -- customized c unit testing meta-program and mini-language
#   program under test  : yEXEC_spec
#   auto-generated script file converted from a previous script version



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                yEXEC.h                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include private header               yEXEC_priv.h                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP          (SPEC) verify heartbeat operations                               rptg_hearbeat, exec_time                                                                              ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     initialize the system                yexec__unit_quiet                                                                                                                 i_equal     0                                                                                                    
     local    create a heartbeat                   - - - - - - - - - - - - -   char  x_heartbeat  [LEN_HUND];                                                                                                                                                                                             
     local    create a file name                   - - - - - - - - - - - - -   char  x_file       [LEN_HUND] = "/tmp/yEXEC.heartbeat";                                                                                                                                                                    

   COND       prepare time                                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     set the date                         yEXEC_heartbeat             7654           , 1320105600     , NULL           , x_file         , x_heartbeat                       i_equal     0                                                                                                    
     get      ...check heartbeat                   yexec_spec__unit            "heartbeat"            , x_file                                                                       s_equal     SPEC heartbeat   : 46[11.10.31.17.00.00.1.44.304  1320105600    7654]                                      
     get      ...check last heartbeat              yexec_spec__unit            "lastbeat"             , x_file                                                                       s_equal     SPEC lastbeat    : 46[11.10.31.17.00.00.1.44.304  1320105600    7654]                                      

   COND       prepare time                                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     set the date                         yEXEC_heartbeat             123            , 1494680400     , NULL           , x_file         , x_heartbeat                       i_equal     0                                                                                                    
     get      ...check heartbeat                   yexec_spec__unit            "heartbeat"            , x_file                                                                       s_equal     SPEC heartbeat   : 46[17.05.13.06.00.00.6.19.133  1494680400     123]                                      
     get      ...check last heartbeat              yexec_spec__unit            "lastbeat"             , x_file                                                                       s_equal     SPEC lastbeat    : 46[17.05.13.06.00.00.6.19.133  1494680400     123]                                      

   COND       prepare time                                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     set the date                         yEXEC_heartbeat             123            , 1494680491     , NULL           , x_file         , x_heartbeat                                                      i_equal     0                                                                                                    
     get      ...check heartbeat                   yexec_spec__unit            "heartbeat"            , x_file                                                                       s_equal     SPEC heartbeat   : 46[17.05.13.06.01.31.6.19.133  1494680491     123]                                      
     get      ...check last heartbeat              yexec_spec__unit            "lastbeat"             , x_file                                                                       s_equal     SPEC lastbeat    : 46[17.05.13.06.01.31.6.19.133  1494680491     123]                                      

   COND       prepare time with a suffix                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     set the date                         yEXEC_heartbeat             123            , 1494680491     , "khronos"      , x_file         , x_heartbeat                                                      i_equal     0                                                                                                    
     get      ...check heartbeat                   yexec_spec__unit            "heartbeat"            , x_file                                                                       s_equal     SPEC heartbeat   : 55[17.05.13.06.01.31.6.19.133  1494680491     123  khronos]                             
     get      ...check last heartbeat              yexec_spec__unit            "lastbeat"             , x_file                                                                       s_equal     SPEC lastbeat    : 55[17.05.13.06.01.31.6.19.133  1494680491     123  khronos]                             

   COND       prepare time with a signal data                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     set the date                         yEXEC_heartbeat             98765          , 1320105600     , "yexec  SIGTERM (15) graceful termination", x_file, x_heartbeat     i_equal     0                                                                                                    
     get      ...check heartbeat                   yexec_spec__unit            "heartbeat"            , x_file                                                                       s_equal     SPEC heartbeat   : 88[11.10.31.17.00.00.1.44.304  1320105600   98765  yexec  SIGTERM (15) graceful termination]  
     get      ...check last heartbeat              yexec_spec__unit            "lastbeat"             , x_file                                                                       s_equal     SPEC lastbeat    : 88[11.10.31.17.00.00.1.44.304  1320105600   98765  yexec  SIGTERM (15) graceful termination]                             

   COND       wrap up testing                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap up                              yexec__unit_end                                                                                                                   i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP          (SPEC) verify user validation and information retrieval            yEXEC_userdata                                                                                        ((02.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     initialize the system                yexec__unit_quiet                                                                                                                 i_equal     0                                                                                                    
     local    create a uid variable                - - - - - - - - - - - - -   int   x_uid  = -1;                                                                                                                                                                                                         
     local    create a gid variable                - - - - - - - - - - - - -   int   x_gid  = -1;                                                                                                                                                                                                         
     local    create a path variable               - - - - - - - - - - - - -   char  x_dir   [LEN_PATH] = "";                                                                                                                                                                                             
     local    create a path variable               - - - - - - - - - - - - -   char  x_shell [LEN_PATH] = "";                                                                                                                                                                                             

   COND       start with a success                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call user validation                 yEXEC_userdata              "root"                 , &x_uid      , &x_gid       , x_dir         , x_shell                         i_equal     0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     0                                                                                                    
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     0                                                                                                    
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal     /root                                                                                                
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal     /bin/bash                                                                                            

   COND       attempt a clearly false user                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call user validation                 yEXEC_userdata              "hasselback"           , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          

   COND       attempt null and too short names                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call user validation                 yEXEC_userdata              NULL                   , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              ""                     , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              "a"                    , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              "bc"                   , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              "tim"                  , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          

   COND       run another success                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call user validation                 yEXEC_userdata              "member"               , &x_uid      , &x_gid       , x_dir         , x_shell                         i_equal     0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     1000                                                                                                 
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     1000                                                                                                 
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal     /home/member                                                                                         
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal     /bin/bash                                                                                            

   COND       attempt too long names                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call user validation                 yEXEC_userdata              "abcdefghijklmnopqrstu", &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              "abcdefghijklmnopqr"   , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              "abcdefghijklm"        , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          

   COND       attempt with odd characters                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call user validation                 yEXEC_userdata              "my user"              , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              "#member"              , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              "me(mber)"             , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              "iamfine?"             , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              "i_exist"              , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          

   COND       run with a strange home dir                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call user validation                 yEXEC_userdata              "portage"              , &x_uid      , &x_gid       , x_dir         , x_shell                         i_equal     0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     250                                                                                                  
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     250                                                                                                  
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal     /var/tmp/portage                                                                                     
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal     /bin/false                                                                                           

   COND       attempt good but non-existant user names                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call user validation                 yEXEC_userdata              "hammer"               , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              "sbains"               , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          
     exec     call user validation                 yEXEC_userdata              "term377"              , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          

   COND       run with different uid and gid                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call user validation                 yEXEC_userdata              "operator"             , &x_uid      , &x_gid       , x_dir         , x_shell                         i_equal     0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     11                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     0                                                                                                    
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal     /root                                                                                                
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal     /bin/bash                                                                                            

   COND       check on non-existant user                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call user validation                 yEXEC_userdata              "unittester"           , &x_uid      , &x_gid       , x_dir         , x_shell                         i_lesser    0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     -1                                                                                                   
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal                                                                                                          
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal                                                                                                          

   COND       create and check again                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create a test user                   yUNIT_user_add              "unittester"           , "wowzer"    , "/usr/local/bin/unit_daemon"                                   i_equal     0                                                                                                    
     exec     call user validation                 yEXEC_userdata              "unittester"           , &x_uid      , &x_gid       , x_dir         , x_shell                         i_equal     0                                                                                                    
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_greater   0                                                                                                    
     echo     ...check returned gid                - - - - - - - - - - - - -   x_gid                                                                                                 i_equal     65534                                                                                                
     echo     ...check returned dir                - - - - - - - - - - - - -   x_dir                                                                                                 s_equal     /home/unittester                                                                                     
     echo     ...check returned shell              - - - - - - - - - - - - -   x_shell                                                                                               s_equal     /usr/local/bin/unit_daemon                                                                           
     exec     remove a test user                   yUNIT_user_del              "unittester"                                                                                          i_equal     0                                                                                                    

   COND       wrap up testing                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.011))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap up                              yexec__unit_end                                                                                                                   i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP          (SPEC) verify who am i                                           yEXEC_whoami                                                                                          ((03.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     initialize the system                yexec__unit_quiet                                                                                                                 i_equal     0                                                                                                    
     local    create a saved pid                   - - - - - - - - - - - - -   int   x_spid  = getpid ();                                                                                                                                                                                                 
     local    create a saved ppid                  - - - - - - - - - - - - -   int   x_sppid = getppid ();                                                                                                                                                                                                
     local    create a pid variable                - - - - - - - - - - - - -   int   x_pid   = -1;                                                                                                                                                                                                        
     local    create a ppid variable               - - - - - - - - - - - - -   int   x_ppid  = -1;                                                                                                                                                                                                        
     local    create a uid variable                - - - - - - - - - - - - -   int   x_uid   = -1;                                                                                                                                                                                                        
     local    create a root variable               - - - - - - - - - - - - -   char  x_root  = '-';                                                                                                                                                                                                       
     local    create a user variable               - - - - - - - - - - - - -   char  x_user  [LEN_USER];                                                                                                                                                                                                  

   COND       start with root                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call user validation                 yEXEC_whoami                &x_pid  , &x_ppid  , &x_uid  , &x_root  , x_user  , 'n'                                               i_equal     0                                                                                                    
     echo     ...check returned pid                - - - - - - - - - - - - -   x_pid                                                                                                 i_equal     [[ x_spid ]]                                                                                         
     echo     ...check returned ppid               - - - - - - - - - - - - -   x_ppid                                                                                                i_equal     [[ x_sppid ]]                                                                                        
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     0                                                                                                    
     echo     ...check returned user               - - - - - - - - - - - - -   x_user                                                                                                s_equal     root                                                                                                 
     echo     ...check returned root flag          - - - - - - - - - - - - -   x_root                                                                                                i_equal     'y'                                                                                                  

   COND       move to a normal user                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     change to member                     - - - - - - - - - - - - -   setuid (1000);                                                                                                                                                                                                             
     exec     call user validation                 yEXEC_whoami                &x_pid  , &x_ppid  , &x_uid  , &x_root  , x_user  , 'n'                                               i_equal     0                                                                                                    
     echo     ...check returned pid                - - - - - - - - - - - - -   x_pid                                                                                                 i_equal     [[ x_spid ]]                                                                                         
     echo     ...check returned ppid               - - - - - - - - - - - - -   x_ppid                                                                                                i_equal     [[ x_sppid ]]                                                                                        
     echo     ...check returned uid                - - - - - - - - - - - - -   x_uid                                                                                                 i_equal     1000                                                                                                 
     echo     ...check returned user               - - - - - - - - - - - - -   x_user                                                                                                s_equal     member                                                                                               
     echo     ...check returned root flag          - - - - - - - - - - - - -   x_root                                                                                                i_equal     '-'                                                                                                  

   COND       wrap up testing                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap up                              yexec__unit_end                                                                                                                   i_equal     0                                                                                                    



# end-of-file
